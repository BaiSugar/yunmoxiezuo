# 拖拽逻辑重新设计

## 需求明确

### 统一的拖拽行为
1. **独立章节** - 互相换位
2. **分卷** - 互相换位  
3. **分卷内章节** - 互相换位

### 跨区域拖拽
- 分卷内章节可以拖出去 → 成为独立章节
- 独立章节可以拖进分卷 → 成为分卷章节

## 简化设计

### 1. 拖拽元素标识
```tsx
// 统一使用 data-* 属性
data-drag-type="chapter" | "volume"
data-drag-id="{id}"
```

### 2. 放置位置
只需要两个位置：
- `before` - 拖到元素上方
- `after` - 拖到元素下方

### 3. 视觉反馈
在拖拽目标的上方或下方显示插入线条，而不是整个元素高亮

## 实现方案

### 拖拽逻辑
1. 拖起元素 → 记录类型和ID
2. 拖到目标元素 → 判断鼠标位置（上半部分=before，下半部分=after）
3. 松开 → 在目标位置插入

### 跨区域判断
- 如果拖拽章节到分卷上 → before=放到分卷前，after=放到分卷后（都是独立章节）
- 如果拖拽章节到分卷内章节 → 插入到该章节前后（成为分卷章节）
- 如果拖拽章节到独立章节 → 插入到该章节前后（成为独立章节）
