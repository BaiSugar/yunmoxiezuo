# æç¤ºè¯ç³»ç»Ÿ API æ–‡æ¡£

## ğŸ“ æ¦‚è¿°

æç¤ºè¯ç³»ç»Ÿæä¾›å®Œæ•´çš„æç¤ºè¯ç®¡ç†åŠŸèƒ½ï¼ŒåŒ…æ‹¬åˆ›å»ºã€æŸ¥è¯¢ã€åˆ†ç±»ã€æƒé™ç®¡ç†ã€ç”³è¯·å®¡æ ¸ç­‰ã€‚

**åŸºç¡€URL**: `/api/v1`

## ğŸ” è®¤è¯è¯´æ˜

å¤§éƒ¨åˆ†æ¥å£éœ€è¦ JWT è®¤è¯ï¼Œè¯·åœ¨è¯·æ±‚å¤´ä¸­æ·»åŠ ï¼š
```
Authorization: Bearer {token}
```

## ğŸ“Š å­—æ®µè¯´æ˜

### åˆ†ç±» usageType - ä½¿ç”¨åœºæ™¯ç±»å‹

**åˆ†ç±»çº§åˆ«çš„åœºæ™¯åŒºåˆ†**ï¼šæ¯ä¸ªæç¤ºè¯åˆ†ç±»éƒ½å¸¦æœ‰ `usageType` å­—æ®µï¼Œç”¨äºæ˜ç¡®åŒºåˆ†åº”ç”¨åœºæ™¯ï¼š

- **`writing`** (AIå†™ä½œ): æ­¤åˆ†ç±»ä¸‹çš„æç¤ºè¯ç”¨äºå°è¯´ã€æ–‡ç« ç­‰å†…å®¹åˆ›ä½œï¼ˆ**é»˜è®¤å€¼**ï¼‰
  - ä¾‹å¦‚ï¼šå°è¯´åˆ›ä½œã€æ–‡æ¡ˆæ’°å†™ã€è¯—æ­Œåˆ›ä½œã€å‰§æœ¬ç¼–å†™
- **`roleplay`** (è§’è‰²æ‰®æ¼”): æ­¤åˆ†ç±»ä¸‹çš„æç¤ºè¯ç”¨äºè§’è‰²å¯¹è¯ã€äº’åŠ¨ç­‰åœºæ™¯
  - ä¾‹å¦‚ï¼šå†å²äººç‰©ã€è™šæ‹Ÿè§’è‰²ã€èŒä¸šè§’è‰²

**é‡è¦è¯´æ˜**ï¼š
- åˆ†ç±»çš„ `usageType` å†³å®šäº†è¯¥åˆ†ç±»ä¸‹æ‰€æœ‰æç¤ºè¯çš„ä½¿ç”¨åœºæ™¯
- å‰ç«¯æ ¹æ®åˆ†ç±»çš„ `usageType` è‡ªåŠ¨è¿‡æ»¤ï¼š
  - AIå†™ä½œåŒºåªæ˜¾ç¤º `usageType='writing'` çš„åˆ†ç±»åŠå…¶æç¤ºè¯
  - è§’è‰²æ‰®æ¼”åŒºåªæ˜¾ç¤º `usageType='roleplay'` çš„åˆ†ç±»åŠå…¶æç¤ºè¯
- åˆ›å»ºæç¤ºè¯æ—¶ï¼Œé€‰æ‹©åˆ†ç±»å°±è‡ªåŠ¨ç¡®å®šäº†ä½¿ç”¨åœºæ™¯

## ğŸ“‹ æ¥å£åˆ—è¡¨

### 1. æç¤ºè¯ç®¡ç†

#### 1.1 åˆ›å»ºæç¤ºè¯

**æ¥å£**: `POST /prompts`  
**è®¤è¯**: å¿…éœ€  
**æƒé™**: æ— ç‰¹æ®Šè¦æ±‚

**è¯·æ±‚ä½“**:
```json
{
  "name": "å°è¯´æƒ…èŠ‚ç”ŸæˆåŠ©æ‰‹",
  "description": "å¸®åŠ©ç”Ÿæˆå°è¯´æƒ…èŠ‚å¤§çº²",
  "isPublic": true,
  "isContentPublic": true,
  "requireApplication": false,
  "categoryId": 1,
  "subCategoryId": 1,
  "status": "draft",
  "contents": [
    {
      "name": "ç³»ç»Ÿæç¤º",
      "role": "system",
      "content": "ä½ æ˜¯ä¸€ä¸ªä¸“ä¸šçš„å°è¯´å†™ä½œåŠ©æ‰‹ã€‚ä¸»è§’åå­—æ˜¯{{ä¸»è§’åå­—}}",
      "order": 0,
      "type": "text",
      "isEnabled": true,
      "parameters": [
        {
          "name": "ä¸»è§’åå­—",
          "required": true,
          "description": "è¯·è¾“å…¥ä¸»è§’çš„åå­—"
        }
      ]
    }
  ]
}
```

**å“åº”**:
```json
{
  "id": 1,
  "name": "å°è¯´æƒ…èŠ‚ç”ŸæˆåŠ©æ‰‹",
  "description": "å¸®åŠ©ç”Ÿæˆå°è¯´æƒ…èŠ‚å¤§çº²",
  "isPublic": true,
  "isContentPublic": true,
  "authorId": 1,
  "categoryId": 1,
  "subCategoryId": 1,
  "hotValue": 0,
  "viewCount": 0,
  "useCount": 0,
  "likeCount": 0,
  "status": "draft",
  "createdAt": "2025-10-20T15:30:00.000Z",
  "updatedAt": "2025-10-20T15:30:00.000Z",
  "contents": [...]
}
```

#### 1.2 è·å–æç¤ºè¯åˆ—è¡¨

**æ¥å£**: `GET /prompts`  
**è®¤è¯**: å¯é€‰  
**æƒé™**: æ— 

**æŸ¥è¯¢å‚æ•°**:
- `page`: é¡µç ï¼ˆé»˜è®¤ 1ï¼‰
- `pageSize`: æ¯é¡µæ•°é‡ï¼ˆé»˜è®¤ 20ï¼‰
- `categoryId`: åˆ†ç±»ID
- `subCategoryId`: å­åˆ†ç±»ID
- `isPublic`: æ˜¯å¦å…¬å¼€
- `authorId`: ä½œè€…ID
- `keyword`: å…³é”®è¯æœç´¢
- `status`: çŠ¶æ€ï¼ˆdraft/published/archivedï¼‰
- `sortBy`: æ’åºå­—æ®µï¼ˆhotValue/createdAt/viewCount/useCount/likeCountï¼‰
- `sortOrder`: æ’åºæ–¹å‘ï¼ˆASC/DESCï¼‰

**å“åº”**:
```json
{
  "data": [...],
  "pagination": {
    "page": 1,
    "pageSize": 20,
    "total": 100,
    "totalPages": 5
  }
}
```

#### 1.3 è·å–æˆ‘çš„æç¤ºè¯åˆ—è¡¨

**æ¥å£**: `GET /prompts/my`  
**è®¤è¯**: å¿…éœ€  
**æƒé™**: æ— 

**å“åº”**: æç¤ºè¯æ•°ç»„

#### 1.4 è·å–æç¤ºè¯è¯¦æƒ…

**æ¥å£**: `GET /prompts/:id`  
**è®¤è¯**: å¯é€‰ï¼ˆæ”¯æŒç™»å½•å’Œæœªç™»å½•è®¿é—®ï¼‰  
**æƒé™**: æ ¹æ® `status`, `isPublic` å’Œ `isContentPublic` å­—æ®µå†³å®š

**æƒé™æ§åˆ¶è§„åˆ™**:
1. **è‰ç¨¿çŠ¶æ€** (`status=draft`)ï¼šä»…ä½œè€…å¯è®¿é—®ï¼Œå…¶ä»–ç”¨æˆ·è¿”å› 403
2. **å½’æ¡£çŠ¶æ€** (`status=archived`)ï¼šä»…ä½œè€…å¯è®¿é—®ï¼Œå…¶ä»–ç”¨æˆ·è¿”å› 403
3. **å·²å‘å¸ƒçŠ¶æ€** (`status=published`)ï¼š
   - å¦‚æœ `isPublic=true`ï¼šæ‰€æœ‰äººå¯è®¿é—®åŸºæœ¬ä¿¡æ¯
   - å¦‚æœ `isContentPublic=false` ä¸”éä½œè€…ï¼š`contents` å­—æ®µä¸ºç©º
   - ä½œè€…å§‹ç»ˆå¯ä»¥çœ‹åˆ°å®Œæ•´ä¿¡æ¯

**å“åº”**:
```json
{
  "id": 1,
  "name": "å°è¯´æƒ…èŠ‚ç”ŸæˆåŠ©æ‰‹",
  "author": {
    "id": 1,
    "username": "user1",
    "nickname": "ä½œè€…æ˜µç§°"
  },
  "category": {...},
  "subCategory": {...},
  "contents": [...] // å¦‚æœ isContentPublic=false ä¸”éä½œè€…ï¼Œæ­¤å­—æ®µä¸ºç©º
}
```

**æ³¨æ„äº‹é¡¹**:
- è¯¥æ¥å£æ”¯æŒå¯é€‰è®¤è¯ï¼Œå·²ç™»å½•ç”¨æˆ·å¯ä»¥æŸ¥çœ‹è‡ªå·±çš„è‰ç¨¿å’Œå½’æ¡£æç¤ºè¯
- æ¥å£ä¼šè‡ªåŠ¨å¢åŠ æµè§ˆæ¬¡æ•°ï¼ˆ`viewCount`ï¼‰

#### 1.5 æ›´æ–°æç¤ºè¯

**æ¥å£**: `PATCH /prompts/:id`  
**è®¤è¯**: å¿…éœ€  
**æƒé™**: ä»…ä½œè€…

**è¯·æ±‚ä½“**: ä¸åˆ›å»ºç›¸åŒï¼Œæ‰€æœ‰å­—æ®µå¯é€‰

**æ³¨æ„**:
- å¦‚æœæä¾› `contents` å­—æ®µï¼Œä¼š**å®Œå…¨æ›¿æ¢**ç°æœ‰å†…å®¹ï¼ˆåˆ é™¤æ—§å†…å®¹ï¼Œæ·»åŠ æ–°å†…å®¹ï¼‰
- å¦‚æœä¸æä¾› `contents` å­—æ®µï¼Œåˆ™ä¿æŒç°æœ‰å†…å®¹ä¸å˜
- å»ºè®®æ¯æ¬¡æ›´æ–°æ—¶éƒ½å‘é€å®Œæ•´çš„ contents æ•°ç»„

#### 1.6 åˆ é™¤æç¤ºè¯

**æ¥å£**: `DELETE /prompts/:id`  
**è®¤è¯**: å¿…éœ€  
**æƒé™**: ä»…ä½œè€…

#### 1.7 ä½¿ç”¨æç¤ºè¯

**æ¥å£**: `POST /prompts/:id/use`  
**è®¤è¯**: å¿…éœ€  
**è¯´æ˜**: å¢åŠ ä½¿ç”¨æ¬¡æ•°ç»Ÿè®¡

**å“åº”**:
```json
{
  "message": "ä½¿ç”¨è®°å½•æˆåŠŸ"
}
```

#### 1.8 ç‚¹èµæç¤ºè¯

**æ¥å£**: `POST /prompts/:id/like`  
**è®¤è¯**: å¿…éœ€

**å“åº”**:
```json
{
  "message": "ç‚¹èµæˆåŠŸ"
}
```

#### 1.9 å–æ¶ˆç‚¹èµ

**æ¥å£**: `DELETE /prompts/:id/like`  
**è®¤è¯**: å¿…éœ€

#### 1.10 è·å–ç»Ÿè®¡æ•°æ®

**æ¥å£**: `GET /prompts/:id/stats`  
**è®¤è¯**: å¯é€‰

**å“åº”**:
```json
{
  "viewCount": 100,
  "useCount": 50,
  "likeCount": 20,
  "hotValue": 850
}
```

**çƒ­åº¦å€¼è®¡ç®—å…¬å¼**: `viewCount * 1 + useCount * 5 + likeCount * 10`

---

### 2. åˆ†ç±»ç®¡ç†

#### 2.1 è·å–æ‰€æœ‰åˆ†ç±»

**æ¥å£**: `GET /prompt-categories`  
**è®¤è¯**: å¯é€‰

**å“åº”**:
```json
[
  {
    "id": 1,
    "name": "AIå†™ä½œ",
    "icon": "âœï¸",
    "description": "ç”¨äºè¾…åŠ©å°è¯´ã€æ–‡ç« ç­‰å„ç±»æ–‡æœ¬åˆ›ä½œ",
    "order": 1,
    "subCategories": [
      {
        "id": 1,
        "name": "å°è¯´åˆ›ä½œ",
        "description": "é•¿ç¯‡å°è¯´ã€çŸ­ç¯‡æ•…äº‹åˆ›ä½œ",
        "order": 1
      }
    ]
  }
]
```

#### 2.2 è·å–åˆ†ç±»è¯¦æƒ…

**æ¥å£**: `GET /prompt-categories/:id`  
**è®¤è¯**: å¯é€‰

#### 2.3 åˆ›å»ºåˆ†ç±»ï¼ˆç®¡ç†å‘˜ï¼‰

**æ¥å£**: `POST /prompt-categories`  
**è®¤è¯**: å¿…éœ€  
**æƒé™**: `prompt:category:create`

**è¯·æ±‚ä½“**:
```json
{
  "name": "AIå†™ä½œ",
  "icon": "âœï¸",
  "description": "ç”¨äºè¾…åŠ©å°è¯´ã€æ–‡ç« ç­‰å„ç±»æ–‡æœ¬åˆ›ä½œ",
  "order": 1
}
```

#### 2.4 æ›´æ–°åˆ†ç±»ï¼ˆç®¡ç†å‘˜ï¼‰

**æ¥å£**: `PATCH /prompt-categories/:id`  
**è®¤è¯**: å¿…éœ€  
**æƒé™**: `prompt:category:update`

#### 2.5 åˆ é™¤åˆ†ç±»ï¼ˆç®¡ç†å‘˜ï¼‰

**æ¥å£**: `DELETE /prompt-categories/:id`  
**è®¤è¯**: å¿…éœ€  
**æƒé™**: `prompt:category:delete`

#### 2.6 åˆ›å»ºå­åˆ†ç±»ï¼ˆç®¡ç†å‘˜ï¼‰

**æ¥å£**: `POST /prompt-categories/sub`  
**è®¤è¯**: å¿…éœ€  
**æƒé™**: `prompt:category:create`

**è¯·æ±‚ä½“**:
```json
{
  "categoryId": 1,
  "name": "å°è¯´åˆ›ä½œ",
  "description": "é•¿ç¯‡å°è¯´ã€çŸ­ç¯‡æ•…äº‹åˆ›ä½œ",
  "order": 1
}
```

#### 2.7 æ›´æ–°å­åˆ†ç±»ï¼ˆç®¡ç†å‘˜ï¼‰

**æ¥å£**: `PATCH /prompt-categories/sub/:id`  
**è®¤è¯**: å¿…éœ€  
**æƒé™**: `prompt:category:update`

#### 2.8 åˆ é™¤å­åˆ†ç±»ï¼ˆç®¡ç†å‘˜ï¼‰

**æ¥å£**: `DELETE /prompt-categories/sub/:id`  
**è®¤è¯**: å¿…éœ€  
**æƒé™**: `prompt:category:delete`

---

### 3. æƒé™ç®¡ç†

#### 3.1 æˆäºˆæƒé™ï¼ˆä»…ä½œè€…ï¼‰

**æ¥å£**: `POST /prompts/:promptId/permissions`  
**è®¤è¯**: å¿…éœ€  
**æƒé™**: ä»…æç¤ºè¯ä½œè€…

**è¯·æ±‚ä½“**:
```json
{
  "userId": 2,
  "permission": "use"
}
```

**æƒé™ç±»å‹**:
- `view`: æŸ¥çœ‹
- `use`: ä½¿ç”¨
- `edit`: ç¼–è¾‘

#### 3.2 è·å–æƒé™åˆ—è¡¨ï¼ˆä»…ä½œè€…ï¼‰

**æ¥å£**: `GET /prompts/:promptId/permissions`  
**è®¤è¯**: å¿…éœ€  
**æƒé™**: ä»…æç¤ºè¯ä½œè€…

**å“åº”**:
```json
[
  {
    "id": 1,
    "promptId": 1,
    "userId": 2,
    "permission": "use",
    "grantedBy": 1,
    "createdAt": "2025-10-20T15:30:00.000Z",
    "user": {
      "id": 2,
      "username": "user2",
      "nickname": "ç”¨æˆ·2"
    }
  }
]
```

#### 3.3 æ’¤é”€æƒé™ï¼ˆä»…ä½œè€…ï¼‰

**æ¥å£**: `DELETE /prompts/:promptId/permissions/:userId`  
**è®¤è¯**: å¿…éœ€  
**æƒé™**: ä»…æç¤ºè¯ä½œè€…

---

### 4. ç”³è¯·ç®¡ç†

#### 4.1 ç”³è¯·ä½¿ç”¨éœ€è¦ç”³è¯·æƒé™çš„æç¤ºè¯

**æ¥å£**: `POST /prompt-applications/prompts/:promptId/apply`  
**è®¤è¯**: å¿…éœ€

**è¯´æ˜**:
- ä»…å½“æç¤ºè¯è®¾ç½®äº† `requireApplication: true` æ—¶éœ€è¦ç”³è¯·
- `isPublic`ã€`isContentPublic`ã€`requireApplication` æ˜¯ä¸‰ä¸ªç‹¬ç«‹çš„å­—æ®µ
- ä½œè€…ä¸èƒ½ç”³è¯·è‡ªå·±çš„æç¤ºè¯

**è¯·æ±‚ä½“**:
```json
{
  "reason": "æˆ‘æ­£åœ¨åˆ›ä½œä¸€éƒ¨æ‚¬ç–‘å°è¯´ï¼Œéœ€è¦ä½¿ç”¨è¿™ä¸ªæç¤ºè¯"
}
```

**å“åº”**:
```json
{
  "id": 1,
  "promptId": 1,
  "userId": 2,
  "reason": "æˆ‘æ­£åœ¨åˆ›ä½œä¸€éƒ¨æ‚¬ç–‘å°è¯´ï¼Œéœ€è¦ä½¿ç”¨è¿™ä¸ªæç¤ºè¯",
  "status": "pending",
  "createdAt": "2025-10-20T15:30:00.000Z"
}
```

#### 4.2 è·å–æˆ‘çš„ç”³è¯·åˆ—è¡¨

**æ¥å£**: `GET /prompt-applications/my`  
**è®¤è¯**: å¿…éœ€

**å“åº”**:
```json
[
  {
    "id": 1,
    "promptId": 1,
    "status": "pending",
    "reason": "...",
    "createdAt": "2025-10-20T15:30:00.000Z",
    "prompt": {
      "id": 1,
      "name": "å°è¯´æƒ…èŠ‚ç”ŸæˆåŠ©æ‰‹"
    },
    "reviewer": null,
    "reviewedAt": null,
    "reviewNote": null
  }
]
```

#### 4.3 è·å–å¾…æˆ‘å®¡æ ¸çš„ç”³è¯·åˆ—è¡¨

**æ¥å£**: `GET /prompt-applications/pending`  
**è®¤è¯**: å¿…éœ€

**å“åº”**: å¾…å®¡æ ¸çš„ç”³è¯·æ•°ç»„

#### 4.4 è·å–æç¤ºè¯çš„ç”³è¯·åˆ—è¡¨ï¼ˆä»…ä½œè€…ï¼‰

**æ¥å£**: `GET /prompt-applications/prompts/:promptId`  
**è®¤è¯**: å¿…éœ€  
**æƒé™**: ä»…æç¤ºè¯ä½œè€…

#### 4.5 å®¡æ ¸ç”³è¯·ï¼ˆä»…ä½œè€…ï¼‰

**æ¥å£**: `PATCH /prompt-applications/:id/review`  
**è®¤è¯**: å¿…éœ€  
**æƒé™**: ä»…æç¤ºè¯ä½œè€…

**è¯·æ±‚ä½“**:
```json
{
  "status": "approved",
  "reviewNote": "å·²é€šè¿‡å®¡æ ¸ï¼Œæ¬¢è¿ä½¿ç”¨"
}
```

**çŠ¶æ€**:
- `approved`: é€šè¿‡ï¼ˆ**ç³»ç»Ÿä¼šè‡ªåŠ¨æˆäºˆ `use` æƒé™**ï¼‰
- `rejected`: æ‹’ç»

**å“åº”**:
```json
{
  "id": 1,
  "status": "approved",
  "reviewedBy": 1,
  "reviewedAt": "2025-10-20T16:00:00.000Z",
  "reviewNote": "å·²é€šè¿‡å®¡æ ¸ï¼Œæ¬¢è¿ä½¿ç”¨"
}
```

**âš¡ è‡ªåŠ¨æˆæƒæœºåˆ¶**

å½“å®¡æ ¸çŠ¶æ€ä¸º `approved` æ—¶ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨æ‰§è¡Œä»¥ä¸‹æ“ä½œï¼š

1. âœ… åœ¨ `prompt_permissions` è¡¨ä¸­åˆ›å»ºæƒé™è®°å½•
2. âœ… æˆäºˆç”³è¯·ç”¨æˆ· `use` æƒé™
3. âœ… ç”¨æˆ·ç«‹å³å¯ä»¥æŸ¥çœ‹å®Œæ•´å†…å®¹å¹¶ä½¿ç”¨æç¤ºè¯

**æµç¨‹å›¾**:
```
å®¡æ ¸é€šè¿‡ â†’ ç³»ç»Ÿè‡ªåŠ¨æˆæƒ â†’ ç”¨æˆ·è·å¾— use æƒé™ â†’ å¯ä»¥ä½¿ç”¨æç¤ºè¯
```

---

## ğŸ”‘ æ ¸å¿ƒå­—æ®µè¯´æ˜

### Promptï¼ˆæç¤ºè¯ï¼‰

| å­—æ®µ | ç±»å‹ | è¯´æ˜ |
|------|------|------|
| `id` | number | ä¸»é”®ID |
| `name` | string | æç¤ºè¯åç§° |
| `description` | string | æç¤ºè¯æè¿° |
| `isPublic` | boolean | æ˜¯å¦å…¬å¼€ï¼ˆæç¤ºè¯æœ¬èº«çš„å¯è§æ€§ï¼‰ |
| `isContentPublic` | boolean | æç¤ºè¯å†…å®¹æ˜¯å¦å…¬å¼€ï¼ˆæ§åˆ¶æ˜¯å¦è¿”å› contents å­—æ®µï¼‰ |
| `authorId` | number | ä½œè€…ID |
| `categoryId` | number | åˆ†ç±»ID |
| `subCategoryId` | number | å­åˆ†ç±»ID |
| `hotValue` | number | çƒ­åº¦å€¼ |
| `viewCount` | number | æŸ¥çœ‹æ¬¡æ•° |
| `useCount` | number | ä½¿ç”¨æ¬¡æ•° |
| `likeCount` | number | ç‚¹èµæ¬¡æ•° |
| `status` | enum | çŠ¶æ€ï¼ˆdraft/published/archivedï¼‰ |

### PromptContentï¼ˆæç¤ºè¯å†…å®¹ï¼‰

| å­—æ®µ | ç±»å‹ | è¯´æ˜ |
|------|------|------|
| `id` | number | ä¸»é”®ID |
| `promptId` | number | æç¤ºè¯ID |
| `role` | enum | è§’è‰²ç±»å‹ï¼ˆsystem/user/assistantï¼‰ |
| `content` | string | å†…å®¹æ–‡æœ¬ï¼ˆå¯åŒ…å« {{å‚æ•°å}} å ä½ç¬¦ï¼‰ |
| `order` | number | æ’åºé¡ºåº |
| `type` | enum | å†…å®¹ç±»å‹ï¼ˆtext/character/worldviewï¼‰ |
| `referenceId` | number | å¼•ç”¨IDï¼ˆäººç‰©å¡æˆ–ä¸–ç•Œè§‚çš„IDï¼‰ |
| `isEnabled` | boolean | è¯¥æ¶ˆæ¯æ˜¯å¦å¯ç”¨ |
| `parameters` | array | å‚æ•°é…ç½® |

### å‚æ•°ç³»ç»Ÿ

æç¤ºè¯å†…å®¹æ”¯æŒå‚æ•°å ä½ç¬¦ï¼Œæ ¼å¼ä¸º `{{å‚æ•°å}}`ï¼š

```json
{
  "content": "ä½ æ˜¯ä¸€ä¸ªä¸“ä¸šçš„å°è¯´å†™ä½œåŠ©æ‰‹ã€‚ä¸»è§’åå­—æ˜¯{{ä¸»è§’åå­—}}ï¼Œæ•…äº‹èƒŒæ™¯æ˜¯{{èƒŒæ™¯}}",
  "parameters": [
    {
      "name": "ä¸»è§’åå­—",
      "required": true,
      "description": "è¯·è¾“å…¥ä¸»è§’çš„åå­—"
    },
    {
      "name": "èƒŒæ™¯",
      "required": false,
      "description": "è¯·è¾“å…¥æ•…äº‹èƒŒæ™¯ï¼ˆå¯é€‰ï¼‰"
    }
  ]
}
```

---

## âš ï¸ é”™è¯¯ç 

| çŠ¶æ€ç  | è¯´æ˜ |
|--------|------|
| 200 | æˆåŠŸ |
| 201 | åˆ›å»ºæˆåŠŸ |
| 400 | è¯·æ±‚å‚æ•°é”™è¯¯ |
| 401 | æœªè®¤è¯ |
| 403 | æ— æƒè®¿é—® |
| 404 | èµ„æºä¸å­˜åœ¨ |
| 409 | å†²çªï¼ˆå¦‚é‡å¤ç”³è¯·ï¼‰ |
| 500 | æœåŠ¡å™¨é”™è¯¯ |

---

## ğŸ“Œ ä½¿ç”¨ç¤ºä¾‹

### ç¤ºä¾‹1ï¼šåˆ›å»ºä¸€ä¸ªå¸¦å‚æ•°çš„æç¤ºè¯

```javascript
const response = await fetch('/api/v1/prompts', {
  method: 'POST',
  headers: {
    'Authorization': `Bearer ${token}`,
    'Content-Type': 'application/json'
  },
  body: JSON.stringify({
    name: "å°è¯´å¼€å¤´ç”Ÿæˆå™¨",
    description: "æ ¹æ®ä¸»è§’å’ŒèƒŒæ™¯ç”Ÿæˆå°è¯´å¼€å¤´",
    isPublic: true,
    isContentPublic: true,
    categoryId: 1,
    subCategoryId: 1,
    status: "published",
    contents: [
      {
        role: "system",
        content: "ä½ æ˜¯ä¸€ä¸ªä¸“ä¸šçš„å°è¯´ä½œå®¶ï¼Œæ“…é•¿åˆ›ä½œå¼•äººå…¥èƒœçš„æ•…äº‹å¼€å¤´ã€‚",
        order: 0,
        type: "text",
        isEnabled: true
      },
      {
        role: "user",
        content: "è¯·ä¸ºæˆ‘åˆ›ä½œä¸€ä¸ªå°è¯´å¼€å¤´ã€‚ä¸»è§’æ˜¯{{ä¸»è§’åå­—}}ï¼Œæ•…äº‹èƒŒæ™¯æ˜¯{{èƒŒæ™¯}}ï¼Œé£æ ¼æ˜¯{{é£æ ¼}}ã€‚",
        order: 1,
        type: "text",
        isEnabled: true,
        parameters: [
          { name: "ä¸»è§’åå­—", required: true, description: "ä¸»è§’çš„åå­—" },
          { name: "èƒŒæ™¯", required: true, description: "æ•…äº‹å‘ç”Ÿçš„èƒŒæ™¯" },
          { name: "é£æ ¼", required: false, description: "å†™ä½œé£æ ¼ï¼ˆå¦‚æ‚¬ç–‘ã€æµªæ¼«ç­‰ï¼‰" }
        ]
      }
    ]
  })
});
```

### ç¤ºä¾‹2ï¼šæœç´¢å…¬å¼€çš„AIå†™ä½œæç¤ºè¯

```javascript
const response = await fetch('/api/v1/prompts?categoryId=1&isPublic=true&sortBy=hotValue&sortOrder=DESC&page=1&pageSize=20');
const data = await response.json();
```

### ç¤ºä¾‹3ï¼šç”³è¯·ä½¿ç”¨ç§æœ‰æç¤ºè¯

```javascript
const response = await fetch('/api/v1/prompt-applications/prompts/1/apply', {
  method: 'POST',
  headers: {
    'Authorization': `Bearer ${token}`,
    'Content-Type': 'application/json'
  },
  body: JSON.stringify({
    reason: "æˆ‘æ­£åœ¨åˆ›ä½œä¸€éƒ¨ç§‘å¹»å°è¯´ï¼Œè¿™ä¸ªæç¤ºè¯éå¸¸é€‚åˆæˆ‘çš„éœ€æ±‚"
  })
});
```

---

## ğŸ“ æ›´æ–°æ—¥å¿—

### v1.0.0 - 2025-10-20

#### æ–°å¢åŠŸèƒ½
- âœ… æç¤ºè¯CRUDæ“ä½œ
- âœ… åˆ†ç±»å’Œå­åˆ†ç±»ç®¡ç†
- âœ… æƒé™ç®¡ç†ç³»ç»Ÿ
- âœ… ç”³è¯·å®¡æ ¸æµç¨‹
- âœ… **è‡ªåŠ¨æˆæƒæœºåˆ¶**ï¼ˆå®¡æ ¸é€šè¿‡è‡ªåŠ¨æˆäºˆæƒé™ï¼‰
- âœ… ç»Ÿè®¡å’Œçƒ­åº¦è®¡ç®—
- âœ… å‚æ•°ç³»ç»Ÿæ”¯æŒ
- âœ… å†…å®¹å…¬å¼€æ€§æ§åˆ¶
- âœ… æ¶ˆæ¯å¯ç”¨/ç¦ç”¨åŠŸèƒ½

#### æ ¸å¿ƒç‰¹æ€§
- **åŒé‡å…¬å¼€æ€§æ§åˆ¶**ï¼š`isPublic` æ§åˆ¶æç¤ºè¯å¯è§æ€§ï¼Œ`isContentPublic` æ§åˆ¶å†…å®¹æ˜¯å¦è¿”å›
- **å‚æ•°å ä½ç¬¦**ï¼šæ”¯æŒ `{{å‚æ•°å}}` æ ¼å¼çš„åŠ¨æ€å‚æ•°
- **çƒ­åº¦å€¼ç®—æ³•**ï¼š`viewCount * 1 + useCount * 5 + likeCount * 10`
- **æƒé™åˆ†çº§**ï¼šviewï¼ˆæŸ¥çœ‹ï¼‰< useï¼ˆä½¿ç”¨ï¼‰< editï¼ˆç¼–è¾‘ï¼‰
- **è‡ªåŠ¨æˆæƒ**ï¼šå®¡æ ¸é€šè¿‡åç³»ç»Ÿè‡ªåŠ¨æˆäºˆ `use` æƒé™ï¼Œæ— éœ€æ‰‹åŠ¨æ“ä½œ
- **è½¯åˆ é™¤**ï¼šåˆ é™¤çš„æç¤ºè¯å¯æ¢å¤

---

## ğŸ”— ç›¸å…³èµ„æº

- [æ•°æ®åº“è®¾è®¡æ–‡æ¡£](./database_schema.md)
- [æƒé™ç³»ç»Ÿè¯´æ˜](./permissions.md)
- [å‰ç«¯é›†æˆæŒ‡å—](./frontend_integration.md)
